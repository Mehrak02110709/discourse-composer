<script type="text/discourse-plugin" version="0.8">
  const currentLocale = I18n.currentLocale();
  if (!I18n.translations[currentLocale].js.composer) {
    I18n.translations[currentLocale].js.composer = {};
  }
  I18n.translations[currentLocale].js.composer.my_button_text = "数量d最大值";
  I18n.translations[currentLocale].js.my_button_title = "骰子";

  api.onToolbarCreate(function(toolbar) {
    toolbar.addButton({
      trimLeading: true,
      id: "dice",
      group: "insertions",
      icon: 'dice',
      title: "my_button_title",
      perform: function(e) {
        return e.applySurround(
          '[wrap=dice]',
          "[/wrap]",
          "my_button_text"
        );
      }
    });
  });
</script>